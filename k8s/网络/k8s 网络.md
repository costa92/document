## k8s 网络



## 网桥与Veth pair

同一个宿主机的容器之间通信是通过二层网络进行通信的。物理机如果想通过二层网络通信，那么必须要有两样东西，一个是网线，一个是交换机。

在Linux系统中，扮演虚拟交换机角色的，叫做网桥；扮演网线角色的，叫做veth pair。

以Docker为例，在bridge模式下：

​	Docker Daemon 第一次启动时会创建 docker0 网桥

​        在创建容器时，会创建一个 veth pair  即 veth 设备对

veth pair有两个端点：

- 一端在宿主机中，可以看成是宿主机的一块虚拟网卡，但被关联到docker0网桥上；

- 另一端，则借助net namespace技术，变成了容器中的eth0网卡。

网桥：Linux的网桥提供了在同一个机器上各种网络设备之间互相转发数据的设备。**普通的交换机对于接收到的报文，要么转发，要么丢弃，网桥除了具备普通交换机的功能以外，它还可以调用内核协议栈，处理发送给本机的报文**。